name: Unzip and Move All Contents to Root

on:
  workflow_dispatch:

jobs:
  unzip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Unzip and move files to root
        run: |
          # Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„Ù zip
          zip_file=$(find . -name '*.zip' | head -n 1)
          echo "ğŸ“¦ Found zip file: $zip_file"

          # ÙÙƒ Ø§Ù„Ø¶ØºØ· ÙÙŠ Ù…Ø¬Ù„Ø¯ Ù…Ø¤Ù‚Øª
          mkdir temp_unzip
          unzip -o "$zip_file" -d temp_unzip

          # Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙˆÙ„ Ù…Ø¬Ù„Ø¯ Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ø«Ù„Ø§Ù‹ source-main/)
          inner_dir=$(find temp_unzip -mindepth 1 -maxdepth 1 -type d | head -n 1)
          echo "ğŸ“ Inner directory: $inner_dir"

          # Ø§Ù†Ù‚Ù„ ÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ù…Ù† Ø¯Ø§Ø®Ù„Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø°Ø±
          shopt -s dotglob
          mv "$inner_dir"/* .
          shopt -u dotglob

          # Ø§Ø­Ø°Ù Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø¤Ù‚Øª
          rm -rf temp_unzip
          echo "âœ… Done moving files to root!"
